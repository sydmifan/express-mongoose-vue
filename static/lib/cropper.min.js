/*!
 * Cropper v2.3.4
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2016 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2016-09-03T05:50:45.412Z
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}})(function(aj){var F=aj(window);var u=aj(document);var au=window.location;var aD=window.navigator;var an=window.ArrayBuffer;var Z=window.Uint8Array;var n=window.DataView;var z=window.btoa;var ax="cropper";var ah="cropper-modal";var ad="cropper-hide";var R="cropper-hidden";var B="cropper-invisible";var ag="cropper-move";var P="cropper-crop";var S="cropper-disabled";var w="cropper-bg";var af="mousedown touchstart pointerdown MSPointerDown";var v="mousemove touchmove pointermove MSPointerMove";var C="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel";var b="wheel mousewheel DOMMouseScroll";var q="dblclick";var aq="load."+ax;var J="error."+ax;var L="resize."+ax;var aC="build."+ax;var c="built."+ax;var ar="cropstart."+ax;var ay="cropmove."+ax;var ak="cropend."+ax;var o="crop."+ax;var aw="zoom."+ax;var f=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;var i=/^data:/;var I=/^data:([^;]+);base64,/;var N=/^data:image\/jpeg.*;base64,/;var aA="preview";var at="action";var O="e";var j="w";var e="s";var k="n";var ab="se";var A="sw";var ai="ne";var H="nw";var ao="all";var D="crop";var h="move";var W="zoom";var am="none";var p=aj.isFunction(aj("<canvas>")[0].getContext);var V=aD&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(aD.userAgent);var az=Number;var av=Math.min;var m=Math.max;var E=Math.abs;var ac=Math.sin;var s=Math.cos;var x=Math.sqrt;var y=Math.round;var M=Math.floor;var a=String.fromCharCode;function T(aE){return typeof aE==="number"&&!isNaN(aE)}function G(aE){return typeof aE==="undefined"}function Y(aF,aG){var aE=[];if(T(aG)){aE.push(aG)}return aE.slice.apply(aF,aE)}function t(aG,aF){var aE=Y(arguments,2);return function(){return aG.apply(aF,aE.concat(Y(arguments)))}}function Q(aE){var aF=aE.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return aF&&(aF[1]!==au.protocol||aF[2]!==au.hostname||aF[3]!==au.port)}function ae(aE){var aF="timestamp="+(new Date()).getTime();return(aE+(aE.indexOf("?")===-1?"?":"&")+aF)}function aB(aE){return aE?' crossOrigin="'+aE+'"':""}function ap(aF,aE){var aG;if(aF.naturalWidth&&!V){return aE(aF.naturalWidth,aF.naturalHeight)}aG=document.createElement("img");aG.onload=function(){aE(this.width,this.height)};aG.src=aF.src}function U(aH){var aE=[];var aG=aH.rotate;var aF=aH.scaleX;var aI=aH.scaleY;if(T(aG)&&aG!==0){aE.push("rotate("+aG+"deg)")}if(T(aF)&&aF!==1){aE.push("scaleX("+aF+")")}if(T(aI)&&aI!==1){aE.push("scaleY("+aI+")")}return aE.length?aE.join(" "):"none"}function d(aJ,aK){var aG=E(aJ.degree)%180;var aE=(aG>90?(180-aG):aG)*Math.PI/180;var aH=ac(aE);var aM=s(aE);var aF=aJ.width;var aN=aJ.height;var aO=aJ.aspectRatio;var aI;var aL;if(!aK){aI=aF*aM+aN*aH;aL=aF*aH+aN*aM}else{aI=aF/(aM+aH/aO);aL=aI/aO}return{width:aI,height:aL}}function r(aQ,aW){var aM=aj("<canvas>")[0];var aG=aM.getContext("2d");var aH=0;var aF=0;var aI=aW.naturalWidth;var aO=aW.naturalHeight;var aV=aW.rotate;var aS=aW.scaleX;var aT=aW.scaleY;var aK=T(aS)&&T(aT)&&(aS!==1||aT!==1);var aR=T(aV)&&aV!==0;var aL=aR||aK;var aU=aI*E(aS||1);var aE=aO*E(aT||1);var aN;var aP;var aJ;if(aK){aN=aU/2;aP=aE/2}if(aR){aJ=d({width:aU,height:aE,degree:aV});aU=aJ.width;aE=aJ.height;aN=aU/2;aP=aE/2}aM.width=aU;aM.height=aE;if(aL){aH=-aI/2;aF=-aO/2;aG.save();aG.translate(aN,aP)}if(aR){aG.rotate(aV*Math.PI/180)}if(aK){aG.scale(aS,aT)}aG.drawImage(aQ,M(aH),M(aF),M(aI),M(aO));if(aL){aG.restore()}return aM}function aa(aH){var aE=aH.length;var aG=0;var aF=0;if(aE){aj.each(aH,function(aI,aJ){aG+=aJ.pageX;aF+=aJ.pageY});aG/=aE;aF/=aE}return{pageX:aG,pageY:aF}}function K(aH,aI,aE){var aG="";var aF;for(aF=aI,aE+=aI;aF<aE;aF++){aG+=a(aH.getUint8(aF))}return aG}function X(aL){var aN=new n(aL);var aJ=aN.byteLength;var aK;var aO;var aP;var aE;var aF;var aM;var aI;var aQ;var aG;var aH;if(aN.getUint8(0)===255&&aN.getUint8(1)===216){aG=2;while(aG<aJ){if(aN.getUint8(aG)===255&&aN.getUint8(aG+1)===225){aI=aG;break}aG++}}if(aI){aO=aI+4;aP=aI+10;if(K(aN,aO,4)==="Exif"){aM=aN.getUint16(aP);aF=aM===18761;if(aF||aM===19789){if(aN.getUint16(aP+2,aF)===42){aE=aN.getUint32(aP+4,aF);if(aE>=8){aQ=aP+aE}}}}}if(aQ){aJ=aN.getUint16(aQ,aF);for(aH=0;aH<aJ;aH++){aG=aQ+aH*12+2;if(aN.getUint16(aG,aF)===274){aG+=8;aK=aN.getUint16(aG,aF);if(V){aN.setUint16(aG,1,aF)}break}}}return aK}function g(aK){var aH=aK.replace(I,"");var aI=atob(aH);var aE=aI.length;var aG=new an(aE);var aJ=new Z(aG);var aF;for(aF=0;aF<aE;aF++){aJ[aF]=aI.charCodeAt(aF)}return aG}function l(aG){var aI=new Z(aG);var aE=aI.length;var aH="";var aF;for(aF=0;aF<aE;aF++){aH+=a(aI[aF])}return"data:image/jpeg;base64,"+z(aH)}function al(aE,aF){this.$element=aj(aE);this.options=aj.extend({},al.DEFAULTS,aj.isPlainObject(aF)&&aF);this.isLoaded=false;this.isBuilt=false;this.isCompleted=false;this.isRotated=false;this.isCropped=false;this.isDisabled=false;this.isReplaced=false;this.isLimited=false;this.wheeling=false;this.isImg=false;this.originalUrl="";this.canvas=null;this.cropBox=null;this.init()}al.prototype={constructor:al,init:function(){var aF=this.$element;var aE;if(aF.is("img")){this.isImg=true;this.originalUrl=aE=aF.attr("src");if(!aE){return}aE=aF.prop("src")}else{if(aF.is("canvas")&&p){aE=aF[0].toDataURL()}}this.load(aE)},trigger:function(aE,aF){var aG=aj.Event(aE,aF);this.$element.trigger(aG);return aG},load:function(aE){var aF=this.options;var aH=this.$element;var aG;var aI;if(!aE){return}aH.one(aC,aF.build);if(this.trigger(aC).isDefaultPrevented()){return}this.url=aE;this.image={};if(!aF.checkOrientation||!an){return this.clone()}aG=aj.proxy(this.read,this);if(i.test(aE)){return N.test(aE)?aG(g(aE)):this.clone()}aI=new XMLHttpRequest();aI.onerror=aI.onabort=aj.proxy(function(){this.clone()},this);aI.onload=function(){aG(this.response)};if(aF.checkCrossOrigin&&Q(aE)&&aH.prop("crossOrigin")){aE=ae(aE)}aI.open("get",aE);aI.responseType="arraybuffer";aI.send()},read:function(aJ){var aG=this.options;var aI=X(aJ);var aK=this.image;var aF=0;var aE=1;var aH=1;if(aI>1){this.url=l(aJ);switch(aI){case 2:aE=-1;break;case 3:aF=-180;break;case 4:aH=-1;break;case 5:aF=90;aH=-1;break;case 6:aF=90;break;case 7:aF=90;aE=-1;break;case 8:aF=-90;break}}if(aG.rotatable){aK.rotate=aF}if(aG.scalable){aK.scaleX=aE;aK.scaleY=aH}this.clone()},clone:function(){var aG=this.options;var aJ=this.$element;var aF=this.url;var aH="";var aE;var aI;if(aG.checkCrossOrigin&&Q(aF)){aH=aJ.prop("crossOrigin");if(aH){aE=aF}else{aH="anonymous";aE=ae(aF)}}this.crossOrigin=aH;this.crossOriginUrl=aE;this.$clone=aI=aj("<img"+aB(aH)+' src="'+(aE||aF)+'">');if(this.isImg){if(aJ[0].complete){this.start()}else{aJ.one(aq,aj.proxy(this.start,this))}}else{aI.one(aq,aj.proxy(this.start,this)).one(J,aj.proxy(this.stop,this)).addClass(ad).insertAfter(aJ)}},start:function(){var aE=this.$element;var aF=this.$clone;if(!this.isImg){aF.off(J,this.stop);aE=aF}ap(aE[0],aj.proxy(function(aH,aG){aj.extend(this.image,{naturalWidth:aH,naturalHeight:aG,aspectRatio:aH/aG});this.isLoaded=true;this.build()},this))},stop:function(){this.$clone.remove();this.$clone=null},build:function(){var aF=this.options;var aJ=this.$element;var aI=this.$clone;var aH;var aG;var aE;if(!this.isLoaded){return}if(this.isBuilt){this.unbuild()}this.$container=aJ.parent();this.$cropper=aH=aj(al.TEMPLATE);this.$canvas=aH.find(".cropper-canvas").append(aI);this.$dragBox=aH.find(".cropper-drag-box");this.$cropBox=aG=aH.find(".cropper-crop-box");this.$viewBox=aH.find(".cropper-view-box");this.$face=aE=aG.find(".cropper-face");aJ.addClass(R).after(aH);if(!this.isImg){aI.removeClass(ad)}this.initPreview();this.bind();aF.aspectRatio=m(0,aF.aspectRatio)||NaN;aF.viewMode=m(0,av(3,y(aF.viewMode)))||0;if(aF.autoCrop){this.isCropped=true;if(aF.modal){this.$dragBox.addClass(ah)}}else{aG.addClass(R)}if(!aF.guides){aG.find(".cropper-dashed").addClass(R)}if(!aF.center){aG.find(".cropper-center").addClass(R)}if(aF.cropBoxMovable){aE.addClass(ag).data(at,ao)}if(!aF.highlight){aE.addClass(B)}if(aF.background){aH.addClass(w)}if(!aF.cropBoxResizable){aG.find(".cropper-line, .cropper-point").addClass(R)}this.setDragMode(aF.dragMode);this.render();this.isBuilt=true;this.setData(aF.data);aJ.one(c,aF.built);this.completing=setTimeout(aj.proxy(function(){this.trigger(c);this.trigger(o,this.getData());this.isCompleted=true},this),0)},unbuild:function(){if(!this.isBuilt){return}if(!this.isCompleted){clearTimeout(this.completing)}this.isBuilt=false;this.isCompleted=false;this.initialImage=null;this.initialCanvas=null;this.initialCropBox=null;this.container=null;this.canvas=null;this.cropBox=null;this.unbind();this.resetPreview();this.$preview=null;this.$viewBox=null;this.$cropBox=null;this.$dragBox=null;this.$canvas=null;this.$container=null;this.$cropper.remove();this.$cropper=null},render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();if(this.isCropped){this.renderCropBox()}},initContainer:function(){var aE=this.options;var aG=this.$element;var aH=this.$container;var aF=this.$cropper;aF.addClass(R);aG.removeClass(R);aF.css((this.container={width:m(aH.width(),az(aE.minContainerWidth)||200),height:m(aH.height(),az(aE.minContainerHeight)||100)}));aG.addClass(R);aF.removeClass(R)},initCanvas:function(){var aF=this.options.viewMode;var aL=this.container;var aM=aL.width;var aR=aL.height;var aG=this.image;var aN=aG.naturalWidth;var aQ=aG.naturalHeight;var aE=E(aG.rotate)===90;var aJ=aE?aQ:aN;var aP=aE?aN:aQ;var aO=aJ/aP;var aI=aM;var aH=aR;var aK;if(aR*aO>aM){if(aF===3){aI=aR*aO}else{aH=aM/aO}}else{if(aF===3){aH=aM/aO}else{aI=aR*aO}}aK={naturalWidth:aJ,naturalHeight:aP,aspectRatio:aO,width:aI,height:aH};aK.oldLeft=aK.left=(aM-aI)/2;aK.oldTop=aK.top=(aR-aH)/2;this.canvas=aK;this.isLimited=(aF===1||aF===2);this.limitCanvas(true,true);this.initialImage=aj.extend({},aG);this.initialCanvas=aj.extend({},aK)},limitCanvas:function(aE,aJ){var aO=this.options;var aH=aO.viewMode;var aN=this.container;var aP=aN.width;var aS=aN.height;var aL=this.canvas;var aQ=aL.aspectRatio;var aI=this.cropBox;var aF=this.isCropped&&aI;var aR;var aG;var aK;var aM;if(aE){aR=az(aO.minCanvasWidth)||0;aG=az(aO.minCanvasHeight)||0;if(aH){if(aH>1){aR=m(aR,aP);aG=m(aG,aS);if(aH===3){if(aG*aQ>aR){aR=aG*aQ}else{aG=aR/aQ}}}else{if(aR){aR=m(aR,aF?aI.width:0)}else{if(aG){aG=m(aG,aF?aI.height:0)}else{if(aF){aR=aI.width;aG=aI.height;if(aG*aQ>aR){aR=aG*aQ}else{aG=aR/aQ}}}}}}if(aR&&aG){if(aG*aQ>aR){aG=aR/aQ}else{aR=aG*aQ}}else{if(aR){aG=aR/aQ}else{if(aG){aR=aG*aQ}}}aL.minWidth=aR;aL.minHeight=aG;aL.maxWidth=Infinity;aL.maxHeight=Infinity}if(aJ){if(aH){aK=aP-aL.width;aM=aS-aL.height;aL.minLeft=av(0,aK);aL.minTop=av(0,aM);aL.maxLeft=m(0,aK);aL.maxTop=m(0,aM);if(aF&&this.isLimited){aL.minLeft=av(aI.left,aI.left+aI.width-aL.width);aL.minTop=av(aI.top,aI.top+aI.height-aL.height);aL.maxLeft=aI.left;aL.maxTop=aI.top;if(aH===2){if(aL.width>=aP){aL.minLeft=av(0,aK);aL.maxLeft=m(0,aK)}if(aL.height>=aS){aL.minTop=av(0,aM);aL.maxTop=m(0,aM)}}}}else{aL.minLeft=-aL.width;aL.minTop=-aL.height;aL.maxLeft=aP;aL.maxTop=aS}}},renderCanvas:function(aG){var aJ=this.canvas;var aL=this.image;var aI=aL.rotate;var aH=aL.naturalWidth;var aE=aL.naturalHeight;var aK;var aF;if(this.isRotated){this.isRotated=false;aF=d({width:aL.width,height:aL.height,degree:aI});aK=aF.width/aF.height;if(aK!==aJ.aspectRatio){aJ.left-=(aF.width-aJ.width)/2;aJ.top-=(aF.height-aJ.height)/2;aJ.width=aF.width;aJ.height=aF.height;aJ.aspectRatio=aK;aJ.naturalWidth=aH;aJ.naturalHeight=aE;if(aI%180){aF=d({width:aH,height:aE,degree:aI});aJ.naturalWidth=aF.width;aJ.naturalHeight=aF.height}this.limitCanvas(true,false)}}if(aJ.width>aJ.maxWidth||aJ.width<aJ.minWidth){aJ.left=aJ.oldLeft}if(aJ.height>aJ.maxHeight||aJ.height<aJ.minHeight){aJ.top=aJ.oldTop}aJ.width=av(m(aJ.width,aJ.minWidth),aJ.maxWidth);aJ.height=av(m(aJ.height,aJ.minHeight),aJ.maxHeight);this.limitCanvas(false,true);aJ.oldLeft=aJ.left=av(m(aJ.left,aJ.minLeft),aJ.maxLeft);aJ.oldTop=aJ.top=av(m(aJ.top,aJ.minTop),aJ.maxTop);this.$canvas.css({width:aJ.width,height:aJ.height,left:aJ.left,top:aJ.top});this.renderImage();if(this.isCropped&&this.isLimited){this.limitCropBox(true,true)}if(aG){this.output()}},renderImage:function(aE){var aF=this.canvas;var aG=this.image;var aH;if(aG.rotate){aH=d({width:aF.width,height:aF.height,degree:aG.rotate,aspectRatio:aG.aspectRatio},true)}aj.extend(aG,aH?{width:aH.width,height:aH.height,left:(aF.width-aH.width)/2,top:(aF.height-aH.height)/2}:{width:aF.width,height:aF.height,left:0,top:0});this.$clone.css({width:aG.width,height:aG.height,marginLeft:aG.left,marginTop:aG.top,transform:U(aG)});if(aE){this.output()}},initCropBox:function(){var aF=this.options;var aE=this.canvas;var aH=aF.aspectRatio;var aI=az(aF.autoCropArea)||0.8;var aG={width:aE.width,height:aE.height};if(aH){if(aE.height*aH>aE.width){aG.height=aG.width/aH}else{aG.width=aG.height*aH}}this.cropBox=aG;this.limitCropBox(true,true);aG.width=av(m(aG.width,aG.minWidth),aG.maxWidth);aG.height=av(m(aG.height,aG.minHeight),aG.maxHeight);aG.width=m(aG.minWidth,aG.width*aI);aG.height=m(aG.minHeight,aG.height*aI);aG.oldLeft=aG.left=aE.left+(aE.width-aG.width)/2;aG.oldTop=aG.top=aE.top+(aE.height-aG.height)/2;this.initialCropBox=aj.extend({},aG)},limitCropBox:function(aF,aI){var aN=this.options;var aQ=aN.aspectRatio;var aL=this.container;var aO=aL.width;var aR=aL.height;var aJ=this.canvas;var aH=this.cropBox;var aM=this.isLimited;var aE;var aG;var aK;var aP;if(aF){aE=az(aN.minCropBoxWidth)||0;aG=az(aN.minCropBoxHeight)||0;aE=av(aE,aO);aG=av(aG,aR);aK=av(aO,aM?aJ.width:aO);aP=av(aR,aM?aJ.height:aR);if(aQ){if(aE&&aG){if(aG*aQ>aE){aG=aE/aQ}else{aE=aG*aQ}}else{if(aE){aG=aE/aQ}else{if(aG){aE=aG*aQ}}}if(aP*aQ>aK){aP=aK/aQ}else{aK=aP*aQ}}aH.minWidth=av(aE,aK);aH.minHeight=av(aG,aP);aH.maxWidth=aK;aH.maxHeight=aP}if(aI){if(aM){aH.minLeft=m(0,aJ.left);aH.minTop=m(0,aJ.top);aH.maxLeft=av(aO,aJ.left+aJ.width)-aH.width;aH.maxTop=av(aR,aJ.top+aJ.height)-aH.height}else{aH.minLeft=0;aH.minTop=0;aH.maxLeft=aO-aH.width;aH.maxTop=aR-aH.height}}},renderCropBox:function(){var aE=this.options;var aG=this.container;var aI=aG.width;var aH=aG.height;var aF=this.cropBox;if(aF.width>aF.maxWidth||aF.width<aF.minWidth){aF.left=aF.oldLeft}if(aF.height>aF.maxHeight||aF.height<aF.minHeight){aF.top=aF.oldTop}aF.width=av(m(aF.width,aF.minWidth),aF.maxWidth);aF.height=av(m(aF.height,aF.minHeight),aF.maxHeight);this.limitCropBox(false,true);aF.oldLeft=aF.left=av(m(aF.left,aF.minLeft),aF.maxLeft);aF.oldTop=aF.top=av(m(aF.top,aF.minTop),aF.maxTop);if(aE.movable&&aE.cropBoxMovable){this.$face.data(at,(aF.width===aI&&aF.height===aH)?h:ao)}this.$cropBox.css({width:aF.width,height:aF.height,left:aF.left,top:aF.top});if(this.isCropped&&this.isLimited){this.limitCanvas(true,true)}if(!this.isDisabled){this.output()}},output:function(){this.preview();if(this.isCompleted){this.trigger(o,this.getData())}},initPreview:function(){var aF=aB(this.crossOrigin);var aE=aF?this.crossOriginUrl:this.url;var aG;this.$preview=aj(this.options.preview);this.$clone2=aG=aj("<img"+aF+' src="'+aE+'">');this.$viewBox.html(aG);this.$preview.each(function(){var aH=aj(this);aH.data(aA,{width:aH.width(),height:aH.height(),html:aH.html()});aH.html("<img"+aF+' src="'+aE+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var aF=aj(this);var aE=aF.data(aA);aF.css({width:aE.width,height:aE.height}).html(aE.html).removeData(aA)})},preview:function(){var aH=this.image;var aJ=this.canvas;var aI=this.cropBox;var aK=aI.width;var aF=aI.height;var aE=aH.width;var aM=aH.height;var aG=aI.left-aJ.left-aH.left;var aL=aI.top-aJ.top-aH.top;if(!this.isCropped||this.isDisabled){return}this.$clone2.css({width:aE,height:aM,marginLeft:-aG,marginTop:-aL,transform:U(aH)});this.$preview.each(function(){var aS=aj(this);var aR=aS.data(aA);var aT=aR.width;var aQ=aR.height;var aP=aT;var aO=aQ;var aN=1;if(aK){aN=aT/aK;aO=aF*aN}if(aF&&aO>aQ){aN=aQ/aF;aP=aK*aN;aO=aQ}aS.css({width:aP,height:aO}).find("img").css({width:aE*aN,height:aM*aN,marginLeft:-aG*aN,marginTop:-aL*aN,transform:U(aH)})})},bind:function(){var aE=this.options;var aG=this.$element;var aF=this.$cropper;if(aj.isFunction(aE.cropstart)){aG.on(ar,aE.cropstart)}if(aj.isFunction(aE.cropmove)){aG.on(ay,aE.cropmove)}if(aj.isFunction(aE.cropend)){aG.on(ak,aE.cropend)}if(aj.isFunction(aE.crop)){aG.on(o,aE.crop)}if(aj.isFunction(aE.zoom)){aG.on(aw,aE.zoom)}aF.on(af,aj.proxy(this.cropStart,this));if(aE.zoomable&&aE.zoomOnWheel){aF.on(b,aj.proxy(this.wheel,this))}if(aE.toggleDragModeOnDblclick){aF.on(q,aj.proxy(this.dblclick,this))}u.on(v,(this._cropMove=t(this.cropMove,this))).on(C,(this._cropEnd=t(this.cropEnd,this)));if(aE.responsive){F.on(L,(this._resize=t(this.resize,this)))}},unbind:function(){var aE=this.options;var aG=this.$element;var aF=this.$cropper;if(aj.isFunction(aE.cropstart)){aG.off(ar,aE.cropstart)}if(aj.isFunction(aE.cropmove)){aG.off(ay,aE.cropmove)}if(aj.isFunction(aE.cropend)){aG.off(ak,aE.cropend)}if(aj.isFunction(aE.crop)){aG.off(o,aE.crop)}if(aj.isFunction(aE.zoom)){aG.off(aw,aE.zoom)}aF.off(af,this.cropStart);if(aE.zoomable&&aE.zoomOnWheel){aF.off(b,this.wheel)}if(aE.toggleDragModeOnDblclick){aF.off(q,this.dblclick)}u.off(v,this._cropMove).off(C,this._cropEnd);if(aE.responsive){F.off(L,this._resize)}},resize:function(){var aH=this.options.restore;var aJ=this.$container;var aI=this.container;var aF;var aE;var aG;if(this.isDisabled||!aI){return}aG=aJ.width()/aI.width;if(aG!==1||aJ.height()!==aI.height){if(aH){aF=this.getCanvasData();aE=this.getCropBoxData()}this.render();if(aH){this.setCanvasData(aj.each(aF,function(aK,aL){aF[aK]=aL*aG}));this.setCropBoxData(aj.each(aE,function(aK,aL){aE[aK]=aL*aG}))}}},dblclick:function(){if(this.isDisabled){return}if(this.$dragBox.hasClass(P)){this.setDragMode(h)}else{this.setDragMode(D)}},wheel:function(aF){var aG=aF.originalEvent||aF;var aE=az(this.options.wheelZoomRatio)||0.1;var aH=1;if(this.isDisabled){return}aF.preventDefault();if(this.wheeling){return}this.wheeling=true;setTimeout(aj.proxy(function(){this.wheeling=false},this),50);if(aG.deltaY){aH=aG.deltaY>0?1:-1}else{if(aG.wheelDelta){aH=-aG.wheelDelta/120}else{if(aG.detail){aH=aG.detail>0?1:-1}}}this.zoom(-aH*aE,aF)},cropStart:function(aI){var aH=this.options;var aF=aI.originalEvent;var aK=aF&&aF.touches;var aJ=aI;var aG;var aE;if(this.isDisabled){return}if(aK){aG=aK.length;if(aG>1){if(aH.zoomable&&aH.zoomOnTouch&&aG===2){aJ=aK[1];this.startX2=aJ.pageX;this.startY2=aJ.pageY;aE=W}else{return}}aJ=aK[0]}aE=aE||aj(aJ.target).data(at);if(f.test(aE)){if(this.trigger(ar,{originalEvent:aF,action:aE}).isDefaultPrevented()){return}aI.preventDefault();this.action=aE;this.cropping=false;this.startX=aJ.pageX||aF&&aF.pageX;this.startY=aJ.pageY||aF&&aF.pageY;if(aE===D){this.cropping=true;this.$dragBox.addClass(ah)}}},cropMove:function(aI){var aH=this.options;var aF=aI.originalEvent;var aK=aF&&aF.touches;var aJ=aI;var aE=this.action;var aG;if(this.isDisabled){return}if(aK){aG=aK.length;if(aG>1){if(aH.zoomable&&aH.zoomOnTouch&&aG===2){aJ=aK[1];this.endX2=aJ.pageX;this.endY2=aJ.pageY}else{return}}aJ=aK[0]}if(aE){if(this.trigger(ay,{originalEvent:aF,action:aE}).isDefaultPrevented()){return}aI.preventDefault();this.endX=aJ.pageX||aF&&aF.pageX;this.endY=aJ.pageY||aF&&aF.pageY;this.change(aJ.shiftKey,aE===W?aI:null)}},cropEnd:function(aG){var aF=aG.originalEvent;var aE=this.action;if(this.isDisabled){return}if(aE){aG.preventDefault();if(this.cropping){this.cropping=false;this.$dragBox.toggleClass(ah,this.isCropped&&this.options.modal)}this.action="";this.trigger(ak,{originalEvent:aF,action:aE})}},change:function(aX,aS){var aL=this.options;var aG=aL.aspectRatio;var aT=this.action;var aF=this.container;var aM=this.canvas;var aE=this.cropBox;var aR=aE.width;var aY=aE.height;var aJ=aE.left;var aO=aE.top;var aW=aJ+aR;var aI=aO+aY;var aP=0;var aH=0;var aU=aF.width;var aV=aF.height;var aQ=true;var aK;var aN;if(!aG&&aX){aG=aR&&aY?aR/aY:1}if(this.isLimited){aP=aE.minLeft;aH=aE.minTop;aU=aP+av(aF.width,aM.width,aM.left+aM.width);aV=aH+av(aF.height,aM.height,aM.top+aM.height)}aN={x:this.endX-this.startX,y:this.endY-this.startY};if(aG){aN.X=aN.y*aG;aN.Y=aN.x/aG}switch(aT){case ao:aJ+=aN.x;aO+=aN.y;break;case O:if(aN.x>=0&&(aW>=aU||aG&&(aO<=aH||aI>=aV))){aQ=false;break}aR+=aN.x;if(aG){aY=aR/aG;aO-=aN.Y/2}if(aR<0){aT=j;aR=0}break;case k:if(aN.y<=0&&(aO<=aH||aG&&(aJ<=aP||aW>=aU))){aQ=false;break}aY-=aN.y;aO+=aN.y;if(aG){aR=aY*aG;aJ+=aN.X/2}if(aY<0){aT=e;aY=0}break;case j:if(aN.x<=0&&(aJ<=aP||aG&&(aO<=aH||aI>=aV))){aQ=false;break}aR-=aN.x;aJ+=aN.x;if(aG){aY=aR/aG;aO+=aN.Y/2}if(aR<0){aT=O;aR=0}break;case e:if(aN.y>=0&&(aI>=aV||aG&&(aJ<=aP||aW>=aU))){aQ=false;break}aY+=aN.y;if(aG){aR=aY*aG;aJ-=aN.X/2}if(aY<0){aT=k;aY=0}break;case ai:if(aG){if(aN.y<=0&&(aO<=aH||aW>=aU)){aQ=false;break}aY-=aN.y;aO+=aN.y;aR=aY*aG}else{if(aN.x>=0){if(aW<aU){aR+=aN.x}else{if(aN.y<=0&&aO<=aH){aQ=false}}}else{aR+=aN.x}if(aN.y<=0){if(aO>aH){aY-=aN.y;aO+=aN.y}}else{aY-=aN.y;aO+=aN.y}}if(aR<0&&aY<0){aT=A;aY=0;aR=0}else{if(aR<0){aT=H;aR=0}else{if(aY<0){aT=ab;aY=0}}}break;case H:if(aG){if(aN.y<=0&&(aO<=aH||aJ<=aP)){aQ=false;break}aY-=aN.y;aO+=aN.y;aR=aY*aG;aJ+=aN.X}else{if(aN.x<=0){if(aJ>aP){aR-=aN.x;aJ+=aN.x}else{if(aN.y<=0&&aO<=aH){aQ=false}}}else{aR-=aN.x;aJ+=aN.x}if(aN.y<=0){if(aO>aH){aY-=aN.y;aO+=aN.y}}else{aY-=aN.y;aO+=aN.y}}if(aR<0&&aY<0){aT=ab;aY=0;aR=0}else{if(aR<0){aT=ai;aR=0}else{if(aY<0){aT=A;aY=0}}}break;case A:if(aG){if(aN.x<=0&&(aJ<=aP||aI>=aV)){aQ=false;break}aR-=aN.x;aJ+=aN.x;aY=aR/aG}else{if(aN.x<=0){if(aJ>aP){aR-=aN.x;aJ+=aN.x}else{if(aN.y>=0&&aI>=aV){aQ=false}}}else{aR-=aN.x;aJ+=aN.x}if(aN.y>=0){if(aI<aV){aY+=aN.y}}else{aY+=aN.y}}if(aR<0&&aY<0){aT=ai;aY=0;aR=0}else{if(aR<0){aT=ab;aR=0}else{if(aY<0){aT=H;aY=0}}}break;case ab:if(aG){if(aN.x>=0&&(aW>=aU||aI>=aV)){aQ=false;break}aR+=aN.x;aY=aR/aG}else{if(aN.x>=0){if(aW<aU){aR+=aN.x}else{if(aN.y>=0&&aI>=aV){aQ=false}}}else{aR+=aN.x}if(aN.y>=0){if(aI<aV){aY+=aN.y}}else{aY+=aN.y}}if(aR<0&&aY<0){aT=H;aY=0;aR=0}else{if(aR<0){aT=A;aR=0}else{if(aY<0){aT=ai;aY=0}}}break;case h:this.move(aN.x,aN.y);aQ=false;break;case W:this.zoom((function(a0,a2,aZ,a1){var a4=x(a0*a0+a2*a2);var a3=x(aZ*aZ+a1*a1);return(a3-a4)/a4})(E(this.startX-this.startX2),E(this.startY-this.startY2),E(this.endX-this.endX2),E(this.endY-this.endY2)),aS);this.startX2=this.endX2;this.startY2=this.endY2;aQ=false;break;case D:if(!aN.x||!aN.y){aQ=false;break}aK=this.$cropper.offset();aJ=this.startX-aK.left;aO=this.startY-aK.top;aR=aE.minWidth;aY=aE.minHeight;if(aN.x>0){aT=aN.y>0?ab:ai}else{if(aN.x<0){aJ-=aR;aT=aN.y>0?A:H}}if(aN.y<0){aO-=aY}if(!this.isCropped){this.$cropBox.removeClass(R);this.isCropped=true;if(this.isLimited){this.limitCropBox(true,true)}}break}if(aQ){aE.width=aR;aE.height=aY;aE.left=aJ;aE.top=aO;this.action=aT;this.renderCropBox()}this.startX=this.endX;this.startY=this.endY},crop:function(){if(!this.isBuilt||this.isDisabled){return}if(!this.isCropped){this.isCropped=true;this.limitCropBox(true,true);if(this.options.modal){this.$dragBox.addClass(ah)}this.$cropBox.removeClass(R)}this.setCropBoxData(this.initialCropBox)},reset:function(){if(!this.isBuilt||this.isDisabled){return}this.image=aj.extend({},this.initialImage);this.canvas=aj.extend({},this.initialCanvas);this.cropBox=aj.extend({},this.initialCropBox);this.renderCanvas();if(this.isCropped){this.renderCropBox()}},clear:function(){if(!this.isCropped||this.isDisabled){return}aj.extend(this.cropBox,{left:0,top:0,width:0,height:0});this.isCropped=false;this.renderCropBox();this.limitCanvas(true,true);this.renderCanvas();this.$dragBox.removeClass(ah);this.$cropBox.addClass(R)},replace:function(aF,aE){if(!this.isDisabled&&aF){if(this.isImg){this.$element.attr("src",aF)}if(aE){this.url=aF;this.$clone.attr("src",aF);if(this.isBuilt){this.$preview.find("img").add(this.$clone2).attr("src",aF)}}else{if(this.isImg){this.isReplaced=true}this.options.data=null;this.load(aF)}}},enable:function(){if(this.isBuilt){this.isDisabled=false;this.$cropper.removeClass(S)}},disable:function(){if(this.isBuilt){this.isDisabled=true;this.$cropper.addClass(S)}},destroy:function(){var aE=this.$element;if(this.isLoaded){if(this.isImg&&this.isReplaced){aE.attr("src",this.originalUrl)}this.unbuild();aE.removeClass(R)}else{if(this.isImg){aE.off(aq,this.start)}else{if(this.$clone){this.$clone.remove()}}}aE.removeData(ax)},move:function(aF,aG){var aE=this.canvas;this.moveTo(G(aF)?aF:aE.left+az(aF),G(aG)?aG:aE.top+az(aG))},moveTo:function(aE,aH){var aG=this.canvas;var aF=false;if(G(aH)){aH=aE}aE=az(aE);aH=az(aH);if(this.isBuilt&&!this.isDisabled&&this.options.movable){if(T(aE)){aG.left=aE;aF=true}if(T(aH)){aG.top=aH;aF=true}if(aF){this.renderCanvas(true)}}},zoom:function(aF,aG){var aE=this.canvas;aF=az(aF);if(aF<0){aF=1/(1-aF)}else{aF=1+aF}this.zoomTo(aE.width*aF/aE.naturalWidth,aG)},zoomTo:function(aL,aJ){var aO=this.options;var aK=this.canvas;var aF=aK.width;var aP=aK.height;var aI=aK.naturalWidth;var aQ=aK.naturalHeight;var aE;var aH;var aN;var aG;var aM;aL=az(aL);if(aL>=0&&this.isBuilt&&!this.isDisabled&&aO.zoomable){aH=aI*aL;aN=aQ*aL;if(aJ){aE=aJ.originalEvent}if(this.trigger(aw,{originalEvent:aE,oldRatio:aF/aI,ratio:aH/aI}).isDefaultPrevented()){return}if(aE){aG=this.$cropper.offset();aM=aE.touches?aa(aE.touches):{pageX:aJ.pageX||aE.pageX||0,pageY:aJ.pageY||aE.pageY||0};aK.left-=(aH-aF)*(((aM.pageX-aG.left)-aK.left)/aF);aK.top-=(aN-aP)*(((aM.pageY-aG.top)-aK.top)/aP)}else{aK.left-=(aH-aF)/2;aK.top-=(aN-aP)/2}aK.width=aH;aK.height=aN;this.renderCanvas(true)}},rotate:function(aE){this.rotateTo((this.image.rotate||0)+az(aE))},rotateTo:function(aE){aE=az(aE);if(T(aE)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable){this.image.rotate=aE%360;this.isRotated=true;this.renderCanvas(true)}},scale:function(aF,aG){var aH=this.image;var aE=false;if(G(aG)){aG=aF}aF=az(aF);aG=az(aG);if(this.isBuilt&&!this.isDisabled&&this.options.scalable){if(T(aF)){aH.scaleX=aF;aE=true}if(T(aG)){aH.scaleY=aG;aE=true}if(aE){this.renderImage(true)}}},scaleX:function(aE){var aF=this.image.scaleY;this.scale(aE,T(aF)?aF:1)},scaleY:function(aF){var aE=this.image.scaleX;this.scale(T(aE)?aE:1,aF)},getData:function(aG){var aF=this.options;var aK=this.image;var aE=this.canvas;var aI=this.cropBox;var aH;var aJ;if(this.isBuilt&&this.isCropped){aJ={x:aI.left-aE.left,y:aI.top-aE.top,width:aI.width,height:aI.height};aH=aK.width/aK.naturalWidth;aj.each(aJ,function(aL,aM){aM=aM/aH;aJ[aL]=aG?y(aM):aM})}else{aJ={x:0,y:0,width:0,height:0}}if(aF.rotatable){aJ.rotate=aK.rotate||0}if(aF.scalable){aJ.scaleX=aK.scaleX||1;aJ.scaleY=aK.scaleY||1}return aJ},setData:function(aJ){var aG=this.options;var aL=this.image;var aF=this.canvas;var aE={};var aI;var aK;var aH;if(aj.isFunction(aJ)){aJ=aJ.call(this.element)}if(this.isBuilt&&!this.isDisabled&&aj.isPlainObject(aJ)){if(aG.rotatable){if(T(aJ.rotate)&&aJ.rotate!==aL.rotate){aL.rotate=aJ.rotate;this.isRotated=aI=true}}if(aG.scalable){if(T(aJ.scaleX)&&aJ.scaleX!==aL.scaleX){aL.scaleX=aJ.scaleX;aK=true}if(T(aJ.scaleY)&&aJ.scaleY!==aL.scaleY){aL.scaleY=aJ.scaleY;aK=true}}if(aI){this.renderCanvas()}else{if(aK){this.renderImage()}}aH=aL.width/aL.naturalWidth;if(T(aJ.x)){aE.left=aJ.x*aH+aF.left}if(T(aJ.y)){aE.top=aJ.y*aH+aF.top}if(T(aJ.width)){aE.width=aJ.width*aH}if(T(aJ.height)){aE.height=aJ.height*aH}this.setCropBoxData(aE)}},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var aE=this.canvas;var aF={};if(this.isBuilt){aj.each(["left","top","width","height","naturalWidth","naturalHeight"],function(aG,aH){aF[aH]=aE[aH]})}return aF},setCanvasData:function(aG){var aE=this.canvas;var aF=aE.aspectRatio;if(aj.isFunction(aG)){aG=aG.call(this.$element)}if(this.isBuilt&&!this.isDisabled&&aj.isPlainObject(aG)){if(T(aG.left)){aE.left=aG.left}if(T(aG.top)){aE.top=aG.top}if(T(aG.width)){aE.width=aG.width;aE.height=aG.width/aF}else{if(T(aG.height)){aE.height=aG.height;aE.width=aG.height*aF}}this.renderCanvas(true)}},getCropBoxData:function(){var aE=this.cropBox;var aF;if(this.isBuilt&&this.isCropped){aF={left:aE.left,top:aE.top,width:aE.width,height:aE.height}}return aF||{}},setCropBoxData:function(aI){var aG=this.cropBox;var aH=this.options.aspectRatio;var aE;var aF;if(aj.isFunction(aI)){aI=aI.call(this.$element)}if(this.isBuilt&&this.isCropped&&!this.isDisabled&&aj.isPlainObject(aI)){if(T(aI.left)){aG.left=aI.left}if(T(aI.top)){aG.top=aI.top}if(T(aI.width)){aE=true;aG.width=aI.width}if(T(aI.height)){aF=true;aG.height=aI.height}if(aH){if(aE){aG.height=aG.width/aH}else{if(aF){aG.width=aG.height*aH}}}this.renderCropBox()}},getCroppedCanvas:function(aN){var aF;var aI;var aK;var aJ;var aG;var aM;var aO;var aP;var aL;var aE;var aH;if(!this.isBuilt||!p){return}if(!this.isCropped){return r(this.$clone[0],this.image)}if(!aj.isPlainObject(aN)){aN={}}aH=this.getData();aF=aH.width;aI=aH.height;aP=aF/aI;if(aj.isPlainObject(aN)){aG=aN.width;aM=aN.height;if(aG){aM=aG/aP;aO=aG/aF}else{if(aM){aG=aM*aP;aO=aM/aI}}}aK=M(aG||aF);aJ=M(aM||aI);aL=aj("<canvas>")[0];aL.width=aK;aL.height=aJ;aE=aL.getContext("2d");if(aN.fillColor){aE.fillStyle=aN.fillColor;aE.fillRect(0,0,aK,aJ)}aE.drawImage.apply(aE,(function(){var aZ=r(this.$clone[0],this.image);var aW=aZ.width;var aQ=aZ.height;var aV=this.canvas;var aS=[aZ];var aU=aH.x+aV.naturalWidth*(E(aH.scaleX||1)-1)/2;var aT=aH.y+aV.naturalHeight*(E(aH.scaleY||1)-1)/2;var aR;var a1;var a0;var aY;var a2;var aX;if(aU<=-aF||aU>aW){aU=aR=a0=a2=0}else{if(aU<=0){a0=-aU;aU=0;aR=a2=av(aW,aF+aU)}else{if(aU<=aW){a0=0;aR=a2=av(aF,aW-aU)}}}if(aR<=0||aT<=-aI||aT>aQ){aT=a1=aY=aX=0}else{if(aT<=0){aY=-aT;aT=0;a1=aX=av(aQ,aI+aT)}else{if(aT<=aQ){aY=0;a1=aX=av(aI,aQ-aT)}}}aS.push(M(aU),M(aT),M(aR),M(a1));if(aO){a0*=aO;aY*=aO;a2*=aO;aX*=aO}if(a2>0&&aX>0){aS.push(M(a0),M(aY),M(a2),M(aX))}return aS}).call(this));return aL},setAspectRatio:function(aF){var aE=this.options;if(!this.isDisabled&&!G(aF)){aE.aspectRatio=m(0,aF)||NaN;if(this.isBuilt){this.initCropBox();if(this.isCropped){this.renderCropBox()}}}},setDragMode:function(aH){console.log(this.options);var aE=this.options;var aG;var aF;if(this.isLoaded&&!this.isDisabled){aG=aH===D;aF=aE.movable&&aH===h;aH=(aG||aF)?aH:am;this.$dragBox.data(at,aH).toggleClass(P,aG).toggleClass(ag,aF);if(!aE.cropBoxMovable){this.$face.data(at,aH).toggleClass(P,aG).toggleClass(ag,aF)}}}};al.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:true,restore:true,checkCrossOrigin:true,checkOrientation:true,modal:true,guides:true,center:true,highlight:true,background:true,autoCrop:true,autoCropArea:0.8,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,wheelZoomRatio:0.1,cropBoxMovable:true,cropBoxResizable:true,toggleDragModeOnDblclick:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};al.setDefaults=function(aE){aj.extend(al.DEFAULTS,aE)};al.TEMPLATE=('<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>');al.other=aj.fn.cropper;aj.fn.cropper=function(aE){var aF=Y(arguments,1);var aG;this.each(function(){var aK=aj(this);var aJ=aK.data(ax);var aH;var aI;if(!aJ){if(/destroy/.test(aE)){return}aH=aj.extend({},aK.data(),aj.isPlainObject(aE)&&aE);aK.data(ax,(aJ=new al(this,aH)))}if(typeof aE==="string"&&aj.isFunction(aI=aJ[aE])){aG=aI.apply(aJ,aF)}});return G(aG)?this:aG};aj.fn.cropper.Constructor=al;aj.fn.cropper.setDefaults=al.setDefaults;aj.fn.cropper.noConflict=function(){aj.fn.cropper=al.other;return this}});